!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("signalR")):"function"==typeof define&&define.amd?define("libs",["signalR"],e):"object"==typeof exports?exports.libs=e(require("signalR")):t.libs=e(t.signalR)}(window,function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.util={RandomFrom:function(t,e,i){return i?Math.random()*(e-t+1)+t:Math.floor(Math.random()*(e-t+1)+t)},NumberToString:function(t,e){return(t+="").length>=e?t:new Array(e-t.length+1).join("0")+t},ParseMoney:function(t,e){var i=".";return e&&(i=e),void 0==t?"":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,i)},MoneyHelper:function(t){if(void 0==t||null==t)return 0;var e=parseFloat(t);return e<1e3?e:e<1e6?e%1e3>0?(e/1e3).toFixed(1)+"K":e/1e3+"K":e<1e9?e%1e6>1e4?(e/1e6).toFixed(2)+"M":e/1e6+"M":e%1e9>1e6?(e/1e9).toFixed(4)+"B":e/1e9+"B"},NumberToImage:function(t){var e="",i=t.split("");for(var n in i)i.hasOwnProperty(n)&&(e+="."===i[n]?'<i class="dot"></i> ':'<i class="n'+i[n]+'"></i>');return e},CountUp:function(t,i,n,r,a,o,s,c){var h=this,u=this;if(u.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:function(t,e,i,n){return i*(1-Math.pow(2,-10*t/n))*1024/1023+e},formattingFn:e.util.ParseMoney,prefix:"",suffix:"",numerals:[]},c&&"object"==typeof c)for(var l in u.options)c.hasOwnProperty(l)&&null!==c[l]&&(u.options[l]=c[l]);""===u.options.separator?u.options.useGrouping=!1:u.options.separator=""+u.options.separator;for(var d=0,p=["webkit","moz","ms","o"],m=0;m<p.length&&!window.requestAnimationFrame;++m)window.requestAnimationFrame=window[p[m]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[p[m]+"CancelAnimationFrame"]||window[p[m]+"CancelRequestAnimationFrame"];function f(t){return"number"==typeof t&&!isNaN(t)}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-d)),n=window.setTimeout(function(){t(e+i)},i);return d=e+i,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),u.initialize=function(){return!!h.initialized||(h.error="",h.d=i?t:"string"==typeof t?document.getElementById(t):t,h.d?(h.startVal=Number(r),h.endVal=Number(a),f(h.startVal)&&f(h.endVal)?(h.decimals=Math.max(0,o||0),h.dec=Math.pow(10,h.decimals),h.duration=1e3*Number(s)||2e3,h.countDown=h.startVal>h.endVal,h.frameVal=h.startVal,h.initialized=!0,!0):(h.error="[CountUp] startVal ("+r+") or endVal ("+a+") is not a number",!1)):(h.error="[CountUp] target is null or undefined",!1))},u.printValue=function(t){var r=u.options.formattingFn(t);i?u.d.text=r:"INPUT"===u.d.tagName?this.d.value=r:"text"===u.d.tagName||"tspan"===u.d.tagName?this.d.textContent=r:u.d.innerHTML=n?e.util.NumberToImage(r):r},u.count=function(t){h.startTime||(h.startTime=t),h.timestamp=t;var e=t-h.startTime;h.remaining=h.duration-e,h.options.useEasing?h.countDown?h.frameVal=h.startVal-h.options.easingFn(e,0,h.startVal-h.endVal,h.duration):h.frameVal=h.options.easingFn(e,h.startVal,h.endVal-h.startVal,h.duration):h.countDown?h.frameVal=h.startVal-(h.startVal-h.endVal)*(e/h.duration):h.frameVal=h.startVal+(h.endVal-h.startVal)*(e/h.duration),h.countDown?h.frameVal=h.frameVal<h.endVal?h.endVal:h.frameVal:h.frameVal=h.frameVal>h.endVal?h.endVal:h.frameVal,h.frameVal=Math.round(h.frameVal*h.dec)/h.dec,h.printValue(h.frameVal),e<h.duration?h.rAF=requestAnimationFrame(h.count):h.callback&&h.callback()},u.start=function(t){h.initialize()&&(h.callback=t,h.rAF=requestAnimationFrame(h.count))},u.pauseResume=function(){h.paused?(h.paused=!1,delete h.startTime,h.duration=h.remaining,h.startVal=h.frameVal,requestAnimationFrame(h.count)):(h.paused=!0,cancelAnimationFrame(h.rAF))},u.reset=function(){h.paused=!1,delete h.startTime,h.initialized=!1,h.initialize()&&(cancelAnimationFrame(h.rAF),h.printValue(h.startVal))},u.update=function(t){h.initialize()&&(f(t=Number(t))?(h.error="",t!==h.frameVal&&(cancelAnimationFrame(h.rAF),h.paused=!1,delete h.startTime,h.startVal=h.frameVal,h.endVal=t,h.countDown=h.startVal>h.endVal,h.rAF=requestAnimationFrame(h.count))):h.error="[CountUp] update() - new endVal is not a number: "+t)},u.initialize()&&u.printValue(u.startVal)},IsMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},IsOrientation:function(){return 0===(screen.orientation?Math.abs(screen.orientation.angle):Math.abs(window.orientation))},LoadCss:function(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.head.appendChild(e)},UnloadCSS:function(t){var e=document.head;if(e){var i=e.querySelector('[href="'+t+'"]');i&&i.remove()}},CheckCss:function(t){for(var e=!1,i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href==t){e=!0;break}return e},ClearTimeOut:function(t){t&&(clearTimeout(t),t=null)},ClearTimeInterval:function(t){t&&(clearInterval(t),t=null)},GetData:function(t,e,i,n){try{$.ajax({type:"GET",url:t,processData:!0,data:e,contentType:"application/json; charset=utf-8",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},cache:!1,success:function(t){"function"==typeof i&&i(t)},error:function(t){200===t.status?"function"==typeof i&&i(t.responseText):"function"==typeof n&&n(t)}})}catch(t){alert(t)}},DegreeToRadian:function(t){return t*Math.PI/180}},e.Util=e.util},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2);e.Assets=n.Assets;var r=i(0);e.Util=r.util;var a=i(3);e.Sprite=a.Sprite;var o=i(4);e.Hub=o.Hub;var s=i(6);e.Timer=s.Timer;var c=i(7);e.Player=c.Player;var h=i(8);e.TimerC=h.TimerC;var u=i(9);e.PlayerC=u.PlayerC},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.loader=new PIXI.loaders.Loader}return t.prototype.add=function(t){for(var e=0;e<t.length;e++)""!==t[e].id?this.loader.add(t[e].id,t[e].src):this.loader.add(t[e].src)},t.prototype.load=function(t,e){this.loader.load(),"function"==typeof t&&this.loader.on("progress",t),"function"==typeof e&&this.loader.on("complete",e)},t.prototype.delete=function(){this.loader.destroy()},t}();e.Assets=n},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e}(PIXI.Sprite);e.Sprite=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(5),r=i(0),a=function(){function t(t,e,i){this.url=t,this.token=e,this.game=i}return t.prototype.Connect=function(t,e){var i=this;this.connection=(new n.HubConnectionBuilder).withUrl(this.url,{accessTokenFactory:function(){return i.token},skipNegotiation:!0,transport:n.HttpTransportType.WebSockets}).build(),this.connection.serverTimeoutInMilliseconds=1e5,this.connection.start().then(function(){console.log("connected"),i.Listen();var n=i;n.game.isJoin||n.EnterLobby(t),"function"==typeof e&&e()}).catch(function(t){return console.error(t)}),this.connection.onclose(function(){console.log("connecition closed");try{i.game.Delete(),App.exitGame()}catch(t){}})},t.prototype.Listen=function(){var t=this;this.connection.on("joinGame",function(e,i){console.log(t.game),t.game&&t.game.JoinGame(e,i)}),this.connection.on("playerJoin",function(e){t.game&&t.game.PlayerJoin(e)}),this.connection.on("updateConnectionStatus",function(e,i){console.log("updateConnectionStatus",e,i),t.game&&t.game.UpdateConnectionStatus(e,i)}),this.connection.on("updateAccount",function(t,e,i){console.log("updateAccount",t,e,i)}),this.connection.on("message",function(e,i){console.log("message",e,i),t.ShowMessage(e,i)}),this.connection.on("playerLeave",function(e,i){console.log("playerLeave",e,i),t.game&&t.game.PlayerLeave(e,i)}),this.connection.on("playerOtherDevice",function(e){console.log("playerOtherDevice",e),t.game&&t.game.PlayerOtherDevice(e.r)}),this.connection.on("startGame",function(e,i){t.game&&t.game.StartGame(e,i)})},t.prototype.EnterLobby=function(t){this.connection.invoke("EnterLobby",t).then(function(t){console.log("EnterLbby",t)})},t.prototype.ExitLobby=function(){this.connection.invoke("ExitLobby")},t.prototype.LeaveGame=function(){try{this.connection.invoke("LeaveGame")}catch(t){this.game.PlayerLeave(this.game.currentPlayer.AccountID)}},t.prototype.UnregisterLeaveRoom=function(){try{this.connection.invoke("UnregisterLeaveRoom")}catch(t){this.game.PlayerLeave(this.game.currentPlayer.AccountID)}},t.prototype.PingPong=function(){this.connection.invoke("PingPong")},t.prototype.PlayNow=function(t,e){this.connection.invoke("PlayNow",t,e).then(function(t){console.log("PlayNow",t)})},t.prototype.JoinRoom=function(t,e){this.connection.invoke("JoinRoom",t,e)},t.prototype.BuyIn=function(t,e,i,n){this.connection.invoke("BuyIn",t,e,i,n)},t.prototype.SendMessage=function(t){this.connection.invoke("SendMessage",{content:t})},t.prototype.StartGame=function(){this.connection.invoke("StartGame")},t.prototype.GetMessage=function(t){return t&&t.code?(11007!=t.code&&11014!=t.code&&11015!=t.code||!t.prms||2!=t.prms.length||(t.prms[0]=r.util.ParseMoney(t.prms[0]),t.prms[1]=1==t.prms[1]||"gold"==t.prms[1].toString().toLowerCase()?"GAM":0==t.prms[1]||"xu"==t.prms[1].toString().toLowerCase()?"XU":t.prms[1],App.handleBack()),Message.GetMessage("me"+t.code,t.prms)):t},t.prototype.ShowMessage=function(t,e){this.game&&this.game.name&&"maubinh"==this.game.name&&10001===t.code||(t=this.GetMessage(t),App.showPopupMessage({content:t,textDone:"ok"}))},t}();e.Hub=a},function(e,i){e.exports=t},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this)||this;return i.lineWidth=4,i.w=90,i.h=90,i.startTime=0,i.totalTime=0,i.elapseTime=0,i.currentTimer=0,i.delayTime=0,i.countTime=0,i.drawLine=function(t,e,i,n){this.timerLine.moveTo(t,e),this.timerLine.lineTo(i,n),this.timerLine.endFill()},i.drawCorner=function(t,e,i,n,r){this.timerLine.arc(t,e,i,n,r,!1)},i.setCounter=function(t,e,i){void 0===t||t<=0||((void 0===e||e<0||e>t)&&(e=t),"function"==typeof i&&(this.callback=i),this.totalTime=t,this.elapseTime=e,this.startTime=(new Date).getTime()-1e3*(t-e),this.currentTimer=(this.totalTime-e)/this.totalTime)},i.startTimer=function(t,e,i){this.clearGraphicsObj(),this.countTime=0,this.setCounter(t,e,i)},i.clearTimer=function(t){try{this.clearGraphicsObj(),this.totalTime=0,this.elapseTime=0,this.currentTimer=0,this.destroy({children:!0}),this.callback&&(this.callback=null,delete this.callback)}catch(t){}},i.tick=function(){if(this.currentTimer>1e3+this.delayTime||this.totalTime<=0)return this.callback&&this.callback(),void this.clearTimer();this.currentTimer=((new Date).getTime()-this.startTime)/this.totalTime,this.drawPercentRect(this.currentTimer)},i.startTime=0,i.totalTime=0,i.elapseTime=0,i.currentTimer=0,i.delayTime=100,i.countTime=0,i.w=84+i.lineWidth,i.h=84+i.lineWidth,i.cornerRadius=i.h/2,i.horizLineLength=i.w-2*i.cornerRadius,i.vertLineLength=i.h-2*i.cornerRadius,e.lineWidth&&e.lineWidth!==i.lineWidth&&(i.lineWidth=e.lineWidth),e.width&&e.width!==i.w&&(i.w=e.width,i.cornerRadius=i.w/2,i.horizLineLength=i.w-2*i.cornerRadius),e.height&&e.height!==i.h&&(i.h=e.height,i.cornerRadius=i.h/2,i.vertLineLength=i.h-2*i.cornerRadius),i.timerLine=new PIXI.Graphics,i.addChild(i.timerLine),i}return n(e,t),e.prototype.clearGraphicsObj=function(){this.timerLine.clear()},e.prototype.rgba2Hex=function(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e&&4===e.length?"0x"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},e.prototype.drawPercentRect=function(t){if(!(t<=0||t>1e3+this.delayTime)){var e,i,n,r,a,o,s,c,h,u,l=2*this.cornerRadius*Math.PI/4,d=4*l+2*this.horizLineLength+2*this.vertLineLength,p=0+this.horizLineLength-1,m=p+l,f=m+this.vertLineLength,y=f+l,g=y+this.horizLineLength,v=g+l,T=v+this.vertLineLength,b=t/1e3*d,w=0,x=225,P=1;t>=250&&t<500?w=Math.round(t/5)+50:t<=850?(w=Math.round(t/5)+50,x=225-Math.round((t-600)/2)):t>850&&(w=250,x=0,u=this.totalTime>10?2:Math.round((10-this.totalTime)/2)+2,P=Math.floor(t/15)%u==1?1:.5),h="rgba("+w+","+(x=x<0?0:x)+",0,"+P+")",h=this.rgba2Hex(h),this.timerLine.clear(),this.timerLine.lineStyle(this.lineWidth,h,1),u=b-0,(u=Math.min(u,this.horizLineLength))>0&&(e=this.cornerRadius,i=0,n=this.cornerRadius+u,r=0,this.drawLine(e,i,n,r)),u=b-p,(u=Math.min(u,l))>0&&(a=this.cornerRadius+this.horizLineLength,o=this.cornerRadius,s=-Math.PI/2,c=-Math.PI/2+u/l*Math.PI/2,this.drawCorner(a,o,this.cornerRadius,s,c)),u=b-m,(u=Math.min(u,this.vertLineLength))>this.lineWidth&&(e=this.cornerRadius+this.horizLineLength+this.cornerRadius,i=this.cornerRadius,n=this.cornerRadius+this.horizLineLength+this.cornerRadius,r=this.cornerRadius+u,this.drawLine(e,i,n,r)),u=b-f,(u=Math.min(u,l))>0&&(a=this.cornerRadius+this.horizLineLength,o=this.cornerRadius+this.vertLineLength,s=0,c=u/l*Math.PI/2,this.drawCorner(a,o,this.cornerRadius,s,c)),u=b-y,(u=Math.min(u,this.horizLineLength))>this.lineWidth&&(e=this.cornerRadius+this.horizLineLength,i=this.cornerRadius+this.vertLineLength+this.cornerRadius,n=this.cornerRadius+this.horizLineLength-u,r=this.cornerRadius+this.vertLineLength+this.cornerRadius,this.drawLine(e,i,n,r)),u=b-g,(u=Math.min(u,l))>0&&(a=this.cornerRadius,o=this.cornerRadius+this.vertLineLength,s=Math.PI/2,c=Math.PI/2+u/l*Math.PI/2,this.drawCorner(a,o,this.cornerRadius,s,c)),u=b-v,(u=Math.min(u,this.vertLineLength))>this.lineWidth&&(e=0,i=this.cornerRadius+this.vertLineLength,n=0,r=this.cornerRadius+this.vertLineLength-u,this.drawLine(e,i,n,r)),u=b-T,(u=Math.min(u,l))>0&&(a=this.cornerRadius,o=this.cornerRadius,s=Math.PI,c=Math.PI+u/l*Math.PI/2,this.drawCorner(a,o,this.cornerRadius,s,c))}},e}(PIXI.Container);e.Timer=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),a=function(t){function e(e){var i=t.call(this)||this;return i.pos=0,i.w=140,i.h=140,i.b=85,i.balance=0,i.pos=e.position,i.player=e.player,i.accountId=e.player.AccountID,i.xy=e.xy,i.game=e.game,e.w&&(i.w=e.w),e.h&&(i.h=e.h),e.b&&(i.b=e.b),i.InitAvatar(),i.InitBox(),i.InitStatus(),i}return n(e,t),e.prototype.InitAvatar=function(){this.player.AccountID;this.avatar=PIXI.Sprite.fromImage("/assets/images/avatar/"+this.player.Account.AvatarID+".png"),this.avatar.anchor.set(.5),this.avatar.width=this.w,this.avatar.height=this.h,this.avatar.interactive=!0,this.avatar.buttonMode=!0,this.avatar.position.set(this.xy[0],this.xy[1]),this.addChild(this.avatar)},e.prototype.InitBox=function(){this.box=new PIXI.Sprite(TextureCache["bg-avatar.png"]),this.box.anchor.set(.5),this.box.position.set(this.avatar.x,this.avatar.y+this.avatar.height/2+this.box.height/2+5),this.addChild(this.avatar,this.box),this.txtUserName=new PIXI.Text(this.player.Account.NickName,{fontFamily:"Arial",fontSize:12,fontWeight:"bold",fill:["white"],padding:10}),this.txtUserName.anchor.set(.5),this.txtUserName.position.set(0,-7),this.txtMoney=new PIXI.Text(r.util.ParseMoney(1===this.game.roomModel.MoneyType?this.player.Account.GoldBalance:this.player.Account.CoinBalance),{fontFamily:"Arial",fontSize:12,fontWeight:"bold",fill:["yellow"],padding:10}),this.txtMoney.anchor.set(.5),this.txtMoney.position.set(0,7),this.box.addChild(this.txtUserName,this.txtMoney)},e.prototype.InitStatus=function(){this.disStatus=new PIXI.Sprite(TextureCache["ic-disconnect.png"]),this.disStatus.anchor.set(.5),this.disStatus.position.set(this.avatar.x-this.avatar.width/2,this.avatar.y-21),this.disStatus.visible=!1,this.leaveStatus=new PIXI.Sprite(TextureCache["ic-quit.png"]),this.leaveStatus.anchor.set(.5),this.leaveStatus.position.set(this.avatar.x-this.avatar.width/2,this.avatar.y+21),this.leaveStatus.visible=!1,this.addChild(this.disStatus,this.leaveStatus)},e.prototype.UpdateBalance=function(t){this.txtMoney.text=r.util.ParseMoney(t)},e}(PIXI.Container);e.Player=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var i=t.call(this)||this;return i.startTime=0,i.totalTime=0,i.elapseTime=0,i.currentTimer=0,i.delayTime=0,i.countTime=0,i.angle=0,i.radius=0,i.timerCount=0,i.CreatePoint=function(t,e){return{x:t,y:e}},i.RotateXY=function(t,e,i){var n=Math.PI*i/180,r=Math.cos(n),a=Math.sin(n);return this.CreatePoint(r*t-a*e,a*t+r*e)},i.ComputeMaskPolygon=function(t,e,i,n){for(;n<0;)n+=360;n%=360;var r=this.RotateXY(0,-2*i,n),a=[this.CreatePoint(t,e-2*i),this.CreatePoint(t,e),this.CreatePoint(t+r.x,e+r.y)];return n>270&&a.push(this.CreatePoint(t-2*i,e)),n>180&&a.push(this.CreatePoint(t,e+2*i)),n>90&&a.push(this.CreatePoint(t+2*i,e)),a},i.UpdatePieMask=function(t,e,i,n,r){if(t.clear(),!(r>360)){var a=this.ComputeMaskPolygon(e,i,n,r);t.beginFill(16777215),t.moveTo(a[0].x,a[0].y);for(var o=1;o<a.length;++o)t.lineTo(a[o].x,a[o].y);t.lineTo(a[0].x,a[0].y),t.endFill(),this.pie.mask=this.pieMask}},i.ClearTimer=function(){clearTimeout(this.timer),this.pie.mask=null,this.pieMask.clear(),this.angle=0,this.totalTime=0,this.elapseTime=0,this.currentTimer=0,this.timerCount=-1,this.visible=!1},i.Count=function(t){clearTimeout(t.timer);try{if(t.timerCount--,t.timerCount<0)return;t.txtTimer.text=t.timerCount,t.timer=setTimeout(function(){return t.Count(t)},1e3)}catch(t){}},i.StartTimer=function(t,e){this.ClearTimer(),this.angle=0,this.countTime=0,this.totalTime=t,this.elapseTime=e,this.timerCount=e,this.startTime=(new Date).getTime()-1e3*(t-e),this.currentTimer=(this.totalTime-e)/this.totalTime,this.Count(this)},i.Tick=function(){this.currentTimer>1e3+this.delayTime||this.totalTime<=0?this.visible=!1:(this.visible=!0,this.currentTimer=((new Date).getTime()-this.startTime)/this.totalTime,this.angle=360*this.currentTimer/1e3,this.UpdatePieMask(this.pieMask,0,0,this.radius,this.angle))},i.startTime=0,i.totalTime=0,i.elapseTime=0,i.currentTimer=0,i.delayTime=0,i.countTime=0,i.angle=0,i.radius=0,i.timerCount=0,i.radius=e.radius,i.cirBg=new Sprite(TextureCache[e.bg]),i.cirBg.scale.set(1.01),i.cirBg.anchor.set(.5),i.pie=new Sprite(TextureCache[e.cir]),i.pie.anchor.set(.5),i.pieMask=new Graphics,i.txtTimer=new PIXI.Text("0",{fontFamily:"Roboto-Bold",fontSize:e.fontSize,fontWeight:"bold",fill:["yellow","white"],padding:10}),i.txtTimer.anchor.set(.5),i.addChild(i.cirBg,i.pie,i.pieMask,i.txtTimer),i}return n(e,t),e}(PIXI.Container);e.TimerC=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),a=function(t){function e(e){var i=t.call(this)||this;return i.pos=0,i.w=140,i.h=140,i.b=85,i.balance=0,i.isUnLeave=!1,i.isLeave=!1,i.pos=e.position,i.player=e.player,i.accountId=e.player.AccountId,i.xy=e.xy,i.game=e.game,e.w&&(i.w=e.w),e.h&&(i.h=e.h),e.b&&(i.b=e.b),i.InitAvatar(),i.InitBox(),i.InitStatus(),i}return n(e,t),e.prototype.InitAvatar=function(){var t=null!==this.player.AvatarId?this.player.AvatarId:0;this.avatar=PIXI.Sprite.fromImage("/assets/images/avatar/"+t+".png"),this.avatar.anchor.set(.5),this.avatar.width=this.w,this.avatar.height=this.h,this.avatar.interactive=!0,this.avatar.buttonMode=!0,this.avatar.position.set(this.xy[0],this.xy[1]),this.addChild(this.avatar)},e.prototype.InitBox=function(){this.box=new PIXI.Sprite(void 0!==TextureCache["bg-avatar"]?TextureCache["bg-avatar"]:TextureCache["bg-avatar.png"]),this.box.anchor.set(.5),this.box.position.set(this.avatar.x,this.avatar.y+this.avatar.height/2+this.box.height/2+5),this.addChild(this.avatar,this.box),this.txtUserName=new PIXI.Text(this.player.Nickname,{fontFamily:"Arial",fontSize:12,fontWeight:"bold",fill:["white"],padding:10}),this.txtUserName.anchor.set(.5),this.txtUserName.position.set(0,-7),this.txtMoney=new PIXI.Text(r.util.ParseMoney(this.player.Balance),{fontFamily:"Arial",fontSize:12,fontWeight:"bold",fill:["yellow"],padding:10}),this.txtMoney.anchor.set(.5),this.txtMoney.position.set(0,7),this.box.addChild(this.txtUserName,this.txtMoney)},e.prototype.InitStatus=function(){this.disStatus=new PIXI.Sprite(void 0!==TextureCache["ic-disconnect"]?TextureCache["ic-disconnect"]:TextureCache["ic-disconnect.png"]),this.disStatus.anchor.set(.5),this.disStatus.position.set(this.avatar.x-this.avatar.width/2,this.avatar.y-21),this.disStatus.visible=!1,this.leaveStatus=new PIXI.Sprite(void 0!==TextureCache["ic-quit"]?TextureCache["ic-quit"]:TextureCache["ic-quit.png"]),this.leaveStatus.anchor.set(.5),this.leaveStatus.position.set(this.avatar.x-this.avatar.width/2,this.avatar.y+21),this.leaveStatus.visible=!1,this.addChild(this.disStatus,this.leaveStatus)},e.prototype.UpdateBalance=function(t){this.txtMoney.text=r.util.ParseMoney(t)},e}(PIXI.Container);e.PlayerC=a}])});